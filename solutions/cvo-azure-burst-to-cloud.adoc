---
sidebar: sidebar 
permalink: solutions/cvo-azure-burst-to-cloud.html 
keywords: bluexp automation catalog, netapp automation solutions, azure, cloud volumes ontap, burst to cloud. netapp, console 
summary: æ‚¨å¯ä»¥ä½¿ç”¨æ­¤è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆä½¿ç”¨Terraforméƒ¨ç½²Cloud Volumes ONTAP for Azureã€‚ 
---
= é€‚ç”¨äºAzureçš„Cloud Volumes ONTAPâ€”çªå‘åˆ°äº‘
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
æœ¬æ–‡æ”¯æŒé€‚ç”¨äº Azure è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆçš„NetApp Cloud Volumes ONTAP ï¼Œ NetAppå®¢æˆ·å¯ä»NetAppæ§åˆ¶å°è‡ªåŠ¨åŒ–ç›®å½•ä¸­è·å–è¯¥è§£å†³æ–¹æ¡ˆã€‚

é€‚ç”¨äºAzureçš„Cloud Volumes ONTAPè‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆä½¿ç”¨Terraformè‡ªåŠ¨æ‰§è¡Œé€‚ç”¨äºAzureçš„Cloud Volumes ONTAPå®¹å™¨åŒ–éƒ¨ç½²ã€è®©æ‚¨æ— éœ€ä»»ä½•æ‰‹åŠ¨å¹²é¢„å³å¯å¿«é€Ÿéƒ¨ç½²é€‚ç”¨äºAzureçš„Cloud Volumes ONTAPã€‚

.å¼€å§‹ä¹‹å‰
* æ‚¨å¿…é¡»ä¸‹è½½link:https://console.netapp.com/automationCatalog["Cloud Volumes ONTAP Azureâ€”çªå‘åˆ°äº‘"^]é€šè¿‡æ§åˆ¶å° Web UI å®ç°è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆã€‚è¯¥è§£å†³æ–¹æ¡ˆæ‰“åŒ…ä¸º `CVO-Azure-Burst-To-Cloud.zip`ã€‚
* æ‚¨å¿…é¡»åœ¨ä¸Cloud Volumes ONTAPç›¸åŒçš„ç½‘ç»œä¸Šå®‰è£…Linux VMã€‚
* å®‰è£…Linux VMåã€å¿…é¡»æŒ‰ç…§æœ¬è§£å†³æ–¹æ¡ˆä¸­çš„æ­¥éª¤å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚




== ç¬¬1æ­¥ï¼šå®‰è£…Dockerå’ŒDockeræ„å»º



=== å®‰è£… Docker

ä»¥ä¸‹æ­¥éª¤ä»¥Ubuntu 20.04 Debian Linuxåˆ†å‘è½¯ä»¶ä¸ºä¾‹ã€‚æ‚¨è¿è¡Œçš„å‘½ä»¤å–å†³äºæ‚¨ä½¿ç”¨çš„Linuxåˆ†å‘è½¯ä»¶ã€‚è¯·å‚é˜…é€‚ç”¨äºæ‚¨çš„é…ç½®çš„ç‰¹å®šLinuxåˆ†å‘è½¯ä»¶æ–‡æ¡£ã€‚

.æ­¥éª¤
. è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…Docker `sudo`ï¼š
+
[source, cli]
----
sudo apt-get update
sudo apt-get install apt-transport-https cacertificates curl gnupg-agent software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg |
sudo apt-key add -
sudo add-apt-repository â€œdeb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stableâ€
sudo apt-get update
sudo apt-get install dockerce docker-ce-cli containerd.io
----
. éªŒè¯å®‰è£…ã€‚
+
[source, cli]
----
docker â€“version
----
. éªŒè¯æ˜¯å¦å·²åœ¨Linuxç³»ç»Ÿä¸Šåˆ›å»ºåä¸º"Docker "çš„ç»„ã€‚å¦‚æœ‰å¿…è¦ã€è¯·åˆ›å»ºç»„ï¼š
+
[source, cli]
----
sudo groupadd docker
----
. å°†éœ€è¦è®¿é—®Dockerçš„ç”¨æˆ·æ·»åŠ åˆ°ç»„ï¼š
+
[source, cli]
----
sudo usermod -aG docker $(whoami)
----
. æ‚¨çš„æ›´æ”¹å°†åœ¨æ³¨é”€å¹¶é‡æ–°ç™»å½•åˆ°ç»ˆç«¯ååº”ç”¨ã€‚æˆ–è€…ã€æ‚¨ä¹Ÿå¯ä»¥ç«‹å³åº”ç”¨æ›´æ”¹ï¼š
+
[source, cli]
----
newgrp docker
----




=== å®‰è£…Dockeré…ç½®

.æ­¥éª¤
. è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å®‰è£…Dockeré…ç½® `sudo`ï¼š
+
[source, cli]
----
sudo curl -L â€œhttps://github.com/docker/compose/releases/download/1.29.2/dockercompose-(ğ‘¢ğ‘›ğ‘ğ‘šğ‘’ âˆ’ ğ‘ )âˆ’(uname -m)â€ -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
----
. éªŒè¯å®‰è£…ã€‚
+
[source, cli]
----
docker-compose â€“version
----




== ç¬¬2æ­¥ï¼šå‡†å¤‡Dockeræ˜ åƒ

.æ­¥éª¤
. å°†æ­¤æ–‡ä»¶å¤¹å¤åˆ¶ `CVO-Azure-Burst-To-Cloud.zip`åˆ°è¦ç”¨äºéƒ¨ç½²Cloud Volumes ONTAPçš„Linux VMï¼š
+
[source, cli]
----
scp -i ~/<private-key>.pem -r CVO-Azure-Burst-To-Cloud.zip <azureuser>@<IP_ADDRESS_OF_VM>:<LOCATION_TO_BE_COPIED>
----
+
** `private-key.pem`æ˜¯ç”¨äºæ— å¯†ç ç™»å½•çš„ç§é’¥æ–‡ä»¶ã€‚
** `azureuser`æ˜¯è™šæ‹Ÿæœºç”¨æˆ·åã€‚
** `IP_ADDRESS_OF_VM`æ˜¯VM IPåœ°å€ã€‚
** `LOCATION_TO_BE_COPIED`æ˜¯å¤åˆ¶æ–‡ä»¶å¤¹çš„ä½ç½®ã€‚


. æå– `CVO-Azure-Burst-To-Cloud.zip`æ–‡ä»¶å¤¹ã€‚æ‚¨å¯ä»¥æå–å½“å‰ç›®å½•æˆ–è‡ªå®šä¹‰ä½ç½®ä¸­çš„æ–‡ä»¶å¤¹ã€‚
+
è¦è§£å‹ç¼©å½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶å¤¹ã€è¯·è¿è¡Œï¼š

+
[source, cli]
----
unzip CVO-Azure-Burst-To-Cloud.zip
----
+
è¦åœ¨è‡ªå®šä¹‰ä½ç½®æå–æ–‡ä»¶å¤¹ã€è¯·è¿è¡Œï¼š

+
[source, cli]
----
unzip CVO-Azure-Burst-To-Cloud.zip -d ~/<your_folder_name>
----
. è§£å‹ç¼©å†…å®¹åã€å¯¼èˆªåˆ° `CVO_Azure_Deployment`æ–‡ä»¶å¤¹å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹æ–‡ä»¶ï¼š
+
[source, cli]
----
 ls -la
----
+
æ‚¨åº”çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ã€ç±»ä¼¼äºä»¥ä¸‹ç¤ºä¾‹ï¼š

+
[listing]
----
drwxr-xr-x@ 11 user1 staff 352 May 5 13:56 .
drwxr-xr-x@ 5 user1 staff 160 May 5 14:24 ..
-rw-r--r--@ 1 user1 staff 324 May 5 13:18 .env
-rw-r--r--@ 1 user1 staff 1449 May 5 13:18 Dockerfile
-rw-r--r--@ 1 user1 staff 35149 May 5 13:18 LICENSE
-rw-r--r--@ 1 user1 staff 13356 May 5 14:26 README.md
-rw-r--r-- 1  user1 staff 354318151 May 5 13:51 cvo_azure_flexcache_ubuntu_image_latest
drwxr-xr-x@ 4 user1 staff 128 May 5 13:18 cvo_azure_variables
-rw-r--r--@ 1 user1 staff 996 May 5 13:18 docker-compose-deploy.yml
-rw-r--r--@ 1 user1 staff 1041 May 5 13:18 docker-compose-destroy.yml
-rw-r--r--@ 1 user1 staff 4771 May 5 13:18 sp_role.json
----
. æ‰¾åˆ° `cvo_azure_flexcache_ubuntu_image_latest.tar.gz`æ–‡ä»¶ã€‚å…¶ä¸­åŒ…å«éƒ¨ç½²Cloud Volumes ONTAP for Azureæ‰€éœ€çš„Dockeræ˜ åƒã€‚
. è§£å‹ç¼©æ–‡ä»¶ï¼š
+
[source, cli]
----
docker load -i cvo_azure_flexcache_ubuntu_image_latest.tar.gz
----
. ç­‰å¾…å‡ åˆ†é’Ÿã€ç­‰å¾…Dockeræ˜ åƒåŠ è½½å®Œæ¯•ã€ç„¶åéªŒè¯æ˜¯å¦å·²æˆåŠŸåŠ è½½Dockeræ˜ åƒï¼š
+
[source, cli]
----
docker images
----
+
æ‚¨åº”çœ‹åˆ°ä¸€ä¸ªåä¸ºä¸”å¸¦æœ‰ `latest`æ ‡è®°çš„Dockeræ˜ åƒ `cvo_azure_flexcache_ubuntu_image_latest`ã€å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š

+
[listing]
----
REPOSITORY TAG IMAGE ID CREATED SIZE
cvo_azure_flexcache_ubuntu_image latest 18db15a4d59c 2 weeks ago 1.14GB
----




== ç¬¬3æ­¥ï¼šåˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

åœ¨æ­¤é˜¶æ®µï¼Œæ‚¨å¿…é¡»åˆ›å»ºä¸¤ä¸ªç¯å¢ƒå˜é‡æ–‡ä»¶ã€‚ä¸€ä¸ªæ–‡ä»¶ç”¨äºä½¿ç”¨æœåŠ¡ä¸»ä½“å‡­æ®å¯¹ Azure èµ„æºç®¡ç†å™¨ API è¿›è¡Œèº«ä»½éªŒè¯ã€‚ç¬¬äºŒä¸ªæ–‡ä»¶ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä»¥ä½¿æ§åˆ¶å° Terraform æ¨¡å—èƒ½å¤Ÿå®šä½å’ŒéªŒè¯ Azure APIã€‚

.æ­¥éª¤
. åˆ›å»ºæœåŠ¡ä¸»ä½“ã€‚
+
åœ¨åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶ä¹‹å‰ï¼Œå¿…é¡»æŒ‰ç…§ä¸­çš„æ­¥éª¤åˆ›å»ºæœåŠ¡ä¸»ä½“link:https://learn.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal["åˆ›å»ºå¯ä»¥è®¿é—®èµ„æºçš„Azure Active Directoryåº”ç”¨ç¨‹åºå’ŒæœåŠ¡ä¸»ä½“"^]ã€‚

. å°†*è´¡çŒ®æ–¹*è§’è‰²åˆ†é…ç»™æ–°åˆ›å»ºçš„æœåŠ¡ä¸»ä½“ã€‚
. åˆ›å»ºè‡ªå®šä¹‰è§’è‰²ã€‚
+
.. æ‰¾åˆ°è¯¥ `sp_role.json`æ–‡ä»¶ã€ç„¶ååœ¨åˆ—å‡ºçš„æ“ä½œä¸‹æ£€æŸ¥æ‰€éœ€çš„æƒé™ã€‚
.. æ’å…¥è¿™äº›æƒé™å¹¶å°†è‡ªå®šä¹‰è§’è‰²é™„åŠ åˆ°æ–°åˆ›å»ºçš„æœåŠ¡ä¸»ä½“ã€‚


. å¯¼èˆªåˆ°*Certificates & Secretes*å¹¶é€‰æ‹©*New client Secret*ä»¥åˆ›å»ºå®¢æˆ·ç«¯æœºå¯†ã€‚
+
åˆ›å»ºå®¢æˆ·ç«¯å¯†é’¥æ—¶ï¼Œå¿…é¡»è®°å½•*value*åˆ—ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼Œå› ä¸ºæ‚¨å°†æ— æ³•å†çœ‹åˆ°æ­¤å€¼ã€‚æ‚¨è¿˜å¿…é¡»è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š

+
** å®¢æˆ·ç«¯ ID
** è®¢é˜…ID
** ç§Ÿæˆ·ID
+
åˆ›å»ºç¯å¢ƒå˜é‡æ—¶éœ€è¦æ­¤ä¿¡æ¯ã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡ä¸»ä½“UIçš„*Overview*éƒ¨åˆ†ä¸­æ‰¾åˆ°å®¢æˆ·ç«¯IDå’Œç§Ÿæˆ·IDä¿¡æ¯ã€‚



. åˆ›å»ºç¯å¢ƒæ–‡ä»¶ã€‚
+
.. åœ¨ä»¥ä¸‹ä½ç½®åˆ›å»º `azureauth.env`æ–‡ä»¶ï¼š
+
`path/to/env-file/azureauth.env`

+
... å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼š
+
ClientID=<>clientSecret=<>ä¸‹æ ‡Id=<>ç§Ÿæˆ·ID=<>

+
æ ¼å¼â€œ*å¿…é¡»*â€ä¸ä¸Šé¢æ‰€ç¤ºå®Œå…¨ç›¸åŒï¼Œé”®å’Œå€¼ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚



.. åœ¨ä»¥ä¸‹ä½ç½®åˆ›å»º `credentials.env`æ–‡ä»¶ï¼š
+
`path/to/env-file/credentials.env`

+
... å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼š
+
Azue_ç§Ÿ æˆ·ID=<>Azue_client_SECLE=<>Azue_client_ID=<>Azue_Probation_ID=<>

+
æ ¼å¼â€œ*å¿…é¡»*â€ä¸ä¸Šé¢æ‰€ç¤ºå®Œå…¨ç›¸åŒï¼Œé”®å’Œå€¼ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ã€‚





. å°†ç»å¯¹æ–‡ä»¶è·¯å¾„æ·»åŠ åˆ°æ–‡ä»¶ä¸­ `.env`ã€‚
+
åœ¨ä¸ç¯å¢ƒå˜é‡å¯¹åº”çš„æ–‡ä»¶ä¸­è¾“å…¥ç¯å¢ƒæ–‡ä»¶ `.env`çš„ `AZURE_RM_CREDS`ç»å¯¹è·¯å¾„ `azureauth.env`ã€‚

+
`AZURE_RM_CREDS=path/to/env-file/azureauth.env`

+
åœ¨ä¸ç¯å¢ƒå˜é‡å¯¹åº”çš„æ–‡ä»¶ä¸­è¾“å…¥ç¯å¢ƒæ–‡ä»¶ `.env`çš„ `BLUEXP_TF_AZURE_CREDS`ç»å¯¹è·¯å¾„ `credentials.env`ã€‚

+
`BLUEXP_TF_AZURE_CREDS=path/to/env-file/credentials.env`





== æ­¥éª¤ 4ï¼šæ³¨å†ŒNetAppæ™ºèƒ½æœåŠ¡

é€šè¿‡æ‚¨çš„äº‘æä¾›å•†æ³¨å†ŒNetAppæ™ºèƒ½æœåŠ¡ï¼ŒæŒ‰å°æ—¶ä»˜è´¹ï¼ˆPAYGOï¼‰æˆ–é€šè¿‡å¹´åº¦åˆåŒä»˜è´¹ã€‚NetAppæ™ºèƒ½æœåŠ¡åŒ…æ‹¬NetAppå¤‡ä»½å’Œæ¢å¤ã€ Cloud Volumes ONTAPã€ NetAppäº‘åˆ†å±‚ã€ NetAppå‹’ç´¢è½¯ä»¶æ¢å¤å’ŒNetAppç¾éš¾æ¢å¤ã€‚NetAppæ•°æ®åˆ†ç±»åŒ…å«åœ¨æ‚¨çš„è®¢é˜…ä¸­ï¼Œæ— éœ€é¢å¤–ä»˜è´¹

.æ­¥éª¤
. ä» Azure é—¨æˆ·å¯¼èˆªåˆ° *SaaS* å¹¶é€‰æ‹© *è®¢é˜…NetAppæ™ºèƒ½æœåŠ¡*ã€‚
. é€‰æ‹©*äº‘ç®¡ç†å™¨(æŒ‰å°æ—¶ã€WORMå’Œæ•°æ®æœåŠ¡åˆ’åˆ†çš„å®¹é‡PYGO)*è®¡åˆ’ã€‚
+
æ‚¨å¯ä»¥ä½¿ç”¨ä¸Cloud Volumes ONTAPç›¸åŒçš„èµ„æºç»„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„èµ„æºç»„ã€‚

. é…ç½®æ§åˆ¶å°é—¨æˆ·ä»¥å°† SaaS è®¢é˜…å¯¼å…¥æ§åˆ¶å°ã€‚
+
æ‚¨å¯ä»¥é€šè¿‡å¯¼èˆªåˆ°*äº§å“å’Œè®¡åˆ’è¯¦ç»†ä¿¡æ¯*å¹¶é€‰æ‹©*ç«‹å³é…ç½®å¸æˆ·*é€‰é¡¹ã€ç›´æ¥ä»Azureé—¨æˆ·é…ç½®æ­¤å¸æˆ·ã€‚

+
ç„¶åæ‚¨å°†è¢«é‡å®šå‘åˆ°æ§åˆ¶å°é—¨æˆ·ä»¥ç¡®è®¤é…ç½®ã€‚

. é€šè¿‡é€‰æ‹©â€œ*ä¿å­˜*â€ç¡®è®¤æ§åˆ¶å°é—¨æˆ·ä¸­çš„é…ç½®ã€‚




== ç¬¬5æ­¥ï¼šåˆ›å»ºå¤–éƒ¨å·

æ‚¨åº”åˆ›å»ºä¸€ä¸ªå¤–éƒ¨å·ã€ä»¥ä¿ç•™TerraformçŠ¶æ€æ–‡ä»¶å’Œå…¶ä»–é‡è¦æ–‡ä»¶ã€‚æ‚¨å¿…é¡»ç¡®ä¿æ–‡ä»¶å¯ä¾›Terraformè¿è¡Œå·¥ä½œæµå’Œéƒ¨ç½²ã€‚

.æ­¥éª¤
. åœ¨Dockeræ’°å†™ä¹‹å¤–åˆ›å»ºå¤–éƒ¨å·ï¼š
+
[source, cli]
----
docker volume create Â« volume_name Â»
----
+
ç¤ºä¾‹ï¼š

+
[listing]
----
docker volume create cvo_azure_volume_dst
----
. ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€ï¼š
+
.. å‘ç¯å¢ƒæ–‡ä»¶æ·»åŠ å¤–éƒ¨å·è·¯å¾„ `.env`ã€‚
+
æ‚¨å¿…é¡»éµå¾ªä»¥ä¸‹æ‰€ç¤ºçš„ç¡®åˆ‡æ ¼å¼ã€‚

+
æ ¼å¼ã€‚

+
`PERSISTENT_VOL=path/to/external/volume:/cvo_azure`

+
ç¤ºä¾‹ï¼š
`PERSISTENT_VOL=cvo_azure_volume_dst:/cvo_azure`

.. å°†NFSå…±äº«æ·»åŠ ä¸ºå¤–éƒ¨å·ã€‚
+
è¯·ç¡®ä¿Dockerå®¹å™¨å¯ä»¥ä¸NFSå…±äº«è¿›è¡Œé€šä¿¡ã€å¹¶ä¸”å·²é…ç½®æ­£ç¡®çš„æƒé™(ä¾‹å¦‚è¯»/å†™æƒé™)ã€‚

+
... åœ¨Dockerç¼–åˆ¶æ–‡ä»¶ä¸­æ·»åŠ NFSå…±äº«è·¯å¾„ä½œä¸ºå¤–éƒ¨å·çš„è·¯å¾„ã€å¦‚ä¸‹æ‰€ç¤ºï¼šæ ¼å¼ï¼š
+
`PERSISTENT_VOL=path/to/nfs/volume:/cvo_azure`

+
ç¤ºä¾‹ï¼š
`PERSISTENT_VOL=nfs/mnt/document:/cvo_azure`





. å¯¼èˆªåˆ° `cvo_azure_variables`æ–‡ä»¶å¤¹ã€‚
+
æ‚¨åº”åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°ä»¥ä¸‹å˜é‡æ–‡ä»¶ï¼š

+
`terraform.tfvars`

+
`variables.tf`

. æ ¹æ®éœ€è¦æ›´æ”¹æ–‡ä»¶ä¸­çš„å€¼ `terraform.tfvars`ã€‚
+
ä¿®æ”¹æ–‡ä»¶ä¸­çš„ä»»ä½•å˜é‡å€¼æ—¶ã€æ‚¨å¿…é¡»é˜…è¯»ç‰¹å®šçš„æ”¯æŒæ–‡æ¡£ `terraform.tfvars`ã€‚æ ¹æ®åœ°åŒºã€å¯ç”¨æ€§åŒºåŸŸä»¥åŠé€‚ç”¨äºAzureçš„Cloud Volumes ONTAPæ”¯æŒçš„å…¶ä»–å› ç´ ã€è¿™äº›å€¼å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚å…¶ä¸­åŒ…æ‹¬å•ä¸ªèŠ‚ç‚¹å’Œé«˜å¯ç”¨æ€§(HA)å¯¹çš„è®¸å¯è¯ã€ç£ç›˜å¤§å°å’ŒVMå¤§å°ã€‚

+
æ§åˆ¶å°ä»£ç†å’ŒCloud Volumes ONTAP Terraform æ¨¡å—çš„æ‰€æœ‰æ”¯æŒå˜é‡å‡å·²åœ¨ `variables.tf`æ–‡ä»¶ã€‚æ‚¨å¿…é¡»å¼•ç”¨ `variables.tf`åœ¨æ·»åŠ åˆ°æ–‡ä»¶ä¹‹å‰ `terraform.tfvars`æ–‡ä»¶ã€‚

. æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†ä»¥ä¸‹é€‰é¡¹è®¾ç½®ä¸ºæˆ–æ¥å¯ç”¨æˆ– `false`ç¦ç”¨FlexCacheå’ŒFlexClone `true`ã€‚
+
ä»¥ä¸‹ç¤ºä¾‹å°†å¯ç”¨FlexCacheå’ŒFlexCloneï¼š

+
** `is_flexcache_required = true`
** `is_flexclone_required = true`


. å¦‚æœ‰å¿…è¦ã€æ‚¨å¯ä»¥ä»Azure Active DirectoryæœåŠ¡æ£€ç´¢Terraformå˜é‡çš„å€¼ `az_service_principal_object_id`ï¼š
+
.. å¯¼èˆªåˆ°*ä¼ä¸šåº”ç”¨ç¨‹åºâ€“>æ‰€æœ‰åº”ç”¨ç¨‹åº*ï¼Œç„¶åé€‰æ‹©æ‚¨å…ˆå‰åˆ›å»ºçš„æœåŠ¡ä¸»ä½“çš„åç§°ã€‚
.. å¤åˆ¶å¯¹è±¡IDå¹¶æ’å…¥Terraformå˜é‡çš„å€¼ï¼š
+
`az_service_principal_object_id`







== ç¬¬6æ­¥ï¼šéƒ¨ç½²Cloud Volumes ONTAP for Azure

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤éƒ¨ç½²Cloud Volumes ONTAP for Azureã€‚

.æ­¥éª¤
. ä»æ ¹æ–‡ä»¶å¤¹ä¸­ã€è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è§¦å‘éƒ¨ç½²ï¼š
+
[source, cli]
----
docker-compose up -d
----
+
æ­¤æ—¶å°†è§¦å‘ä¸¤ä¸ªå®¹å™¨ã€ç¬¬ä¸€ä¸ªå®¹å™¨éƒ¨ç½²Cloud Volumes ONTAPã€ç¬¬äºŒä¸ªå®¹å™¨å°†é¥æµ‹æ•°æ®å‘é€åˆ°AutoSupportã€‚

+
ç¬¬äºŒä¸ªå®¹å™¨å°†ç­‰å¾…ã€ç›´åˆ°ç¬¬ä¸€ä¸ªå®¹å™¨æˆåŠŸå®Œæˆæ‰€æœ‰æ­¥éª¤ã€‚

. ä½¿ç”¨æ—¥å¿—æ–‡ä»¶ç›‘æ§éƒ¨ç½²è¿‡ç¨‹çš„è¿›åº¦ï¼š
+
[source, cli]
----
docker-compose logs -f
----
+
æ­¤å‘½ä»¤å¯å®æ—¶æä¾›è¾“å‡ºå¹¶æ•è·ä»¥ä¸‹æ—¥å¿—æ–‡ä»¶ä¸­çš„æ•°æ®ï¼š

+
`deployment.log`

+
`telemetry_asup.log`

+
æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ä»¥ä¸‹ç¯å¢ƒå˜é‡ç¼–è¾‘è¿™äº›æ—¥å¿—æ–‡ä»¶æ¥æ›´æ”¹å…¶åç§° `.env`ï¼š

+
`DEPLOYMENT_LOGS`

+
`TELEMETRY_ASUP_LOGS`

+
ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•æ›´æ”¹æ—¥å¿—æ–‡ä»¶åï¼š

+
`DEPLOYMENT_LOGS=<your_deployment_log_filename>.log`

+
`TELEMETRY_ASUP_LOGS=<your_telemetry_asup_log_filename>.log`



.å®Œæˆå
æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤åˆ é™¤ä¸´æ—¶ç¯å¢ƒå¹¶æ¸…ç†åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­åˆ›å»ºçš„é¡¹ç›®ã€‚

.æ­¥éª¤
. å¦‚æœæ‚¨å·²éƒ¨ç½²FlexCacheã€è¯·åœ¨æ–‡ä»¶ä¸­è®¾ç½®ä»¥ä¸‹é€‰é¡¹ `terraform.tfvars`ã€è¿™æ ·å°†æ¸…ç†FlexCacheå·å¹¶åˆ é™¤å…ˆå‰åˆ›å»ºçš„ä¸´æ—¶ç¯å¢ƒã€‚
+
`flexcache_operation = "destroy"`

+

NOTE: å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬ `deploy`å’Œ `destroy`ã€‚

. å¦‚æœæ‚¨å·²éƒ¨ç½²FlexCloneã€è¯·åœ¨æ–‡ä»¶ä¸­è®¾ç½®ä»¥ä¸‹é€‰é¡¹ `terraform.tfvars`ã€è¿™æ ·å°†æ¸…ç†FlexCloneå·å¹¶åˆ é™¤å…ˆå‰åˆ›å»ºçš„ä¸´æ—¶ç¯å¢ƒã€‚
+
`flexclone_operation = "destroy"`

+

NOTE: å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬ `deploy`å’Œ `destroy`ã€‚


